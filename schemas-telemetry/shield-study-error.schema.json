{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "shield-study-error",
    "description": "Telemetry as sent by client. `payload` is `shield-study-error` data used to notify, group and count some kinds of errors from shield studies. (Note: this schema is generated by `shield-study-schemas`.  Do not edit by hand.)",
    "type": "object",
    "properties": {
        "application": {
            "type": "object",
            "properties": {
                "addons": {
                    "type": "object",
                    "properties": {
                        "activeAddons": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "object",
                                "properties": {
                                    "blocklisted": {
                                        "type": "boolean"
                                    },
                                    "description": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "userDisabled": {
                                        "type": [
                                            "boolean",
                                            "integer"
                                        ]
                                    },
                                    "appDisabled": {
                                        "type": "boolean"
                                    },
                                    "version": {
                                        "type": [
                                            "string",
                                            "number"
                                        ]
                                    },
                                    "scope": {
                                        "type": "integer"
                                    },
                                    "type": {
                                        "type": "string"
                                    },
                                    "foreignInstall": {
                                        "type": [
                                            "integer",
                                            "boolean"
                                        ]
                                    },
                                    "hasBinaryComponents": {
                                        "type": "boolean"
                                    },
                                    "installDay": {
                                        "type": [
                                            "integer",
                                            "null"
                                        ],
                                        "minimum": 0
                                    },
                                    "updateDay": {
                                        "type": "integer",
                                        "minimum": 0
                                    },
                                    "signedState": {
                                        "type": "integer"
                                    }
                                }
                            }
                        },
                        "activeExperiment": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string"
                                },
                                "branch": {
                                    "type": "string"
                                }
                            }
                        },
                        "activeGMPlugins": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "object",
                                "properties": {
                                    "version": {
                                        "type": [
                                            "string",
                                            "null"
                                        ]
                                    },
                                    "userDisabled": {
                                        "type": "boolean"
                                    },
                                    "applyBackgroundUpdates": {
                                        "type": [
                                            "integer",
                                            "boolean"
                                        ]
                                    }
                                }
                            }
                        },
                        "activePlugins": {
                            "type": [
                                "array",
                                "object"
                            ],
                            "items": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "version": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "blocklisted": {
                                        "type": "boolean"
                                    },
                                    "disabled": {
                                        "type": "boolean"
                                    },
                                    "clicktoplay": {
                                        "type": "boolean"
                                    },
                                    "mimeTypes": {
                                        "type": [
                                            "array",
                                            "object"
                                        ],
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "updateDay": {
                                        "type": "integer"
                                    }
                                }
                            }
                        },
                        "persona": {
                            "type": [
                                "string",
                                "null"
                            ]
                        },
                        "theme": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string"
                                },
                                "blocklisted": {
                                    "type": "boolean"
                                },
                                "description": {
                                    "type": [
                                        "string",
                                        "null"
                                    ]
                                },
                                "name": {
                                    "type": "string"
                                },
                                "userDisabled": {
                                    "type": "boolean"
                                },
                                "appDisabled": {
                                    "type": "boolean"
                                },
                                "version": {
                                    "type": "string"
                                },
                                "scope": {
                                    "type": "integer"
                                },
                                "foreignInstall": {
                                    "type": [
                                        "boolean",
                                        "integer"
                                    ]
                                },
                                "hasBinaryComponents": {
                                    "type": "boolean"
                                },
                                "installDay": {
                                    "type": [
                                        "integer",
                                        "null"
                                    ],
                                    "minimum": 0
                                },
                                "updateDay": {
                                    "type": "integer",
                                    "minimum": 0
                                }
                            }
                        }
                    }
                },
                "architecture": {
                    "type": "string"
                },
                "buildId": {
                    "type": "string",
                    "pattern": "^[0-9]{10}"
                },
                "channel": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "platformVersion": {
                    "type": "string",
                    "pattern": "^[0-9]{2,3}\\."
                },
                "version": {
                    "type": "string",
                    "pattern": "^[0-9]{2,3}\\."
                }
            },
            "required": [
                "architecture",
                "buildId",
                "channel",
                "name",
                "platformVersion",
                "version"
            ],
            "additionalProperties": true
        },
        "clientId": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
        },
        "creationDate": {
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\\.[0-9]{3}Z$"
        },
        "environment": {
            "type": "object",
            "properties": {
                "system": {
                    "type": "object",
                    "properties": {
                        "os": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string"
                                },
                                "version": {
                                    "type": "string"
                                },
                                "locale": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                },
                "profile": {
                    "type": "object",
                    "properties": {
                        "creationDate": {
                            "type": "number"
                        },
                        "resetDate": {
                            "type": "number"
                        }
                    }
                },
                "settings": {
                    "type": "object",
                    "properties": {
                        "blocklistEnabled": {
                            "type": "boolean"
                        },
                        "isDefaultBrowser": {
                            "type": "boolean"
                        },
                        "defaultSearchEngine": {
                            "type": "string"
                        },
                        "defaultSearchEngineData": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "type": "string"
                                },
                                "loadPath": {
                                    "type": "string"
                                },
                                "submissionURL": {
                                    "type": "string"
                                },
                                "origin": {
                                    "type": "string"
                                }
                            }
                        },
                        "e10sEnabled": {
                            "type": "boolean"
                        },
                        "e10sCohort": {
                            "type": "string"
                        },
                        "locale": {
                            "type": "string"
                        },
                        "telemetryEnabled": {
                            "type": "boolean"
                        },
                        "update": {
                            "type": "object",
                            "properties": {
                                "autoDownload": {
                                    "type": "boolean"
                                },
                                "channel": {
                                    "type": "string"
                                },
                                "enabled": {
                                    "type": "boolean"
                                }
                            }
                        }
                    }
                }
            },
            "required": []
        },
        "id": {
            "type": "string",
            "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
        },
        "type": {
            "type": "string",
            "description": "doc_type, restated",
            "enum": [
                "shield-study-error"
            ]
        },
        "version": {
            "type": "number",
            "minimum": 4,
            "maximum": 4
        },
        "payload": {
            "type": "object",
            "title": "shield-study-error",
            "description": "`shield-study-error` data used to notify, group and count some kinds of errors from shield studies.",
            "properties": {
                "version": {
                    "type": "integer",
                    "title": "Version schema.  Will be 3",
                    "enum": [
                        3
                    ]
                },
                "study_name": {
                    "description": "Name of a particular study.  Usually the addon_id.",
                    "type": "string",
                    "pattern": "^\\S+$",
                    "minLength": 1,
                    "maxLength": 100
                },
                "branch": {
                    "description": "Which branch (variation) of the study the user has.",
                    "type": "string",
                    "pattern": "^\\S+$",
                    "minLength": 1,
                    "maxLength": 100
                },
                "addon_version": {
                    "description": "Semantic version of the addon.",
                    "type": "string",
                    "pattern": "^\\S+$",
                    "minLength": 1,
                    "maxLength": 100
                },
                "shield_version": {
                    "description": "Which version of the shield-studies-addon-utils.",
                    "type": "string",
                    "pattern": "^\\S+$",
                    "minLength": 1,
                    "maxLength": 100
                },
                "testing": {
                    "type": "boolean",
                    "description": "If `true`, this packet is a TESTING packet and can be safely ignored."
                },
                "data": {
                    "type": "object",
                    "title": "Shield-Study-Error 'data' field",
                    "description": "`shield-study-error` data used to notify, group and count some kinds of errors from shield studies.",
                    "properties": {
                        "error_id": {
                            "description": "between 1,100 chars, no spaces, unicode ok.",
                            "type": "string",
                            "pattern": "^\\S+$",
                            "minLength": 1,
                            "maxLength": 100
                        },
                        "error_source": {
                            "type": "string",
                            "description": "Where did the error originate.",
                            "enum": [
                                "addon",
                                "shield",
                                "firefox",
                                "unknown"
                            ]
                        },
                        "message": {
                            "type": "string",
                            "minLength": 1,
                            "title": "Message schema.",
                            "description": "String of an error message."
                        },
                        "severity": {
                            "type": "string",
                            "description": "An explanation about the purpose of this instance.",
                            "enum": [
                                "debug",
                                "info",
                                "warn",
                                "fatal",
                                "impossible"
                            ]
                        },
                        "attributes": {
                            "type": "object",
                            "description": "Map(string, string) of attributes.",
                            "properties": {},
                            "additionalProperties": {
                                "type": "string"
                            }
                        },
                        "error": {
                            "type": "object",
                            "description": "(Future use), things like tracebacks.",
                            "properties": {},
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "required": [
                        "error_id",
                        "error_source"
                    ]
                },
                "type": {
                    "type": "string",
                    "description": "doc_type, restated",
                    "enum": [
                        "shield-study-error"
                    ]
                }
            },
            "required": [
                "version",
                "study_name",
                "branch",
                "addon_version",
                "shield_version",
                "data",
                "type"
            ]
        }
    },
    "required": [
        "application",
        "creationDate",
        "clientId",
        "id",
        "type",
        "version",
        "payload"
    ]
}
